# Exa.ai-Style Redesign Plan

## Overview

Redesign the karaoke0 app (landing page + player page) to match the Exa.ai visual style: editorial serif headlines, clean sans-serif body text, blue brand accent, light/dark mode support. The core lyrics animation in `LyricsDisplay.tsx` is preserved untouched in logic — only colors adapt to theme.

## Font Strategy

**Google Fonts** (loaded via `<link>` tags in `__root.tsx`):
- **Serif (headlines):** `Playfair Display` (400, 500, 600, 700) — closest free match to ABC Arizona Flare
- **Sans (body/UI):** `Inter` (400, 500, 600, 700) — closest free match to ABC Diatype
- **Mono (timestamps):** `JetBrains Mono` (400, 500) — for audio controls time display

## Color System

| Token | Light | Dark | Usage |
|-------|-------|------|-------|
| `--background` | `#FFFFFF` | `#0A0A0B` | Page bg |
| `--foreground` | `#111827` | `#F9FAFB` | Default text |
| `--card` | `#FFFFFF` | `#18181B` | Card bg |
| `--primary` | `#1F40ED` | `#1F40ED` | Brand blue (both modes) |
| `--primary-foreground` | `#FFFFFF` | `#FFFFFF` | Text on blue |
| `--secondary` | `#111111` | `#27272A` | Dark buttons |
| `--muted` | `#FAF9F7` | `#18181B` | Cream sections |
| `--muted-foreground` | `#6B7280` | `#9CA3AF` | Subdued text |
| `--border` | `#E5E7EB` | `#27272A` | Borders |
| `--ring` | `#1F40ED` | `#1F40ED` | Focus rings |

Additional tokens: `--cream: #FAF9F7` / dark `#1C1C1F`, `--cream-dark: #F0ECE8` / dark `#27272A`

---

## Execution Order (13 Steps)

### Step 1: `src/styles.css` — Rewrite theme tokens

Replace the full `:root` and `.dark` blocks with the new Exa-inspired color palette (hex values). Update `body` font-family to `'Inter', system-ui, sans-serif`. Add font-family CSS custom properties (`--font-serif`, `--font-sans`, `--font-mono`). Add `--color-cream`, `--color-cream-dark` to `@theme inline`. Change `--radius` from `0.625rem` to `0.5rem` (8px, matching Exa's 6-8px preference). Keep the `@layer base` block that applies `bg-background text-foreground`.

### Step 2: `src/hooks/useTheme.ts` — NEW file (~35 lines)

Create a shared hook for dark/light mode detection and toggling:
- `useTheme()` returns `{ isDark: boolean, toggle: () => void }`
- Reads `document.documentElement.classList.contains('dark')` on mount
- Uses `MutationObserver` on `<html>` class attribute to stay in sync
- `toggle()` flips the `dark` class and persists to `localStorage`
- SSR-safe: defaults to `true` when `typeof document === 'undefined'`

### Step 3: `src/routes/__root.tsx` — Font loading + theme init

**Changes:**
1. Add Google Fonts `<link>` tags with `preconnect` to the `head()` config's `links` array
2. Remove `bg-zinc-950` from `<body>` — base layer in CSS handles it
3. Add inline `<script>` before `{children}` for FOUC prevention (reads `localStorage('theme')` or `prefers-color-scheme`, adds `dark` class to `<html>` before paint)
4. Update `theme-color` meta to `#FFFFFF` (add a second one with `media="(prefers-color-scheme: dark)"` for `#0A0A0B`)
5. Update `NotFoundComponent`: `bg-zinc-950 text-white` → `bg-background text-foreground`, serif headline, token-based button

### Step 4: `src/components/ThemeToggle.tsx` — NEW file (~30 lines)

Simple Sun/Moon icon toggle button using `useTheme()`:
- Renders `Sun` icon in dark mode, `Moon` icon in light mode (from lucide-react)
- Styled: `size-9 rounded-lg border border-border text-muted-foreground hover:text-foreground hover:bg-accent transition-colors`

### Step 5: `src/lib/colors.ts` — Add theme-aware opacity

Modify `getGradientColors()` and `generateGradientStyle()` to accept an `isDark` parameter:
- Dark mode: keep current opacities (0.5, 0.4, 0.3 for blobs; 0.35, 0.25 for static)
- Light mode: multiply all opacities by 0.35 so blobs appear as gentle pastel washes on white

### Step 6: `src/components/AnimatedBackground.tsx` — Theme adaptation

- Import and use `useTheme()` hook to get `isDark`
- Pass `isDark` to `getGradientColors(colors, isDark)` and `generateGradientStyle(colors, isDark)`
- No changes to animation logic, timings, or structure

### Step 7: `src/components/LyricsDisplay.tsx` — Theme-aware highlight colors (PRESERVE CORE)

**What MUST NOT change:** Word highlight logic, spring physics, scale transitions, auto-scroll, opacity calculation, gap spacing.

**What changes:**
1. Import `useTheme` hook, call it once in `LyricsDisplay`, pass `isDark` as prop to `LyricLineComponent`
2. In `LyricLineComponent`, compute theme-aware colors:
   - Active color: `isDark ? "#ffffff" : "#111827"`
   - Inactive color: `isDark ? "#71717a" : "#9CA3AF"`
   - Glow: `isDark ? "0 0 8px rgba(255,255,255,0.4)" : "0 0 8px rgba(31,64,237,0.3)"` (blue glow in light mode)
3. Change `font-bold` → `font-semibold` on the line container
4. Add explicit `font-sans` class to line container (ensures Inter is used for lyrics)

### Step 8: `src/components/ui/button.tsx` — Variant token updates

Update the `default` variant to use `bg-primary text-primary-foreground` (brand blue) and add `shadow-sm`. Verify `secondary` variant maps to `bg-secondary text-secondary-foreground` (charcoal). Verify `outline` variant uses `border-border`. No structural changes.

### Step 9: `src/components/AudioControls.tsx` — Theme-aware controls

**Play/Pause button:**
- `bg-white/10 hover:bg-white/20 text-white` → `bg-secondary/80 text-secondary-foreground hover:bg-secondary backdrop-blur-sm`

**Progress bar slider overrides:**
- Track: `bg-zinc-700` → `bg-border`
- Range + thumb: `bg-white` / `border-white` → `bg-primary` / `border-primary` (brand blue progress)

**Timestamps:**
- `text-zinc-400` → `text-muted-foreground`

### Step 10: `src/routes/index.tsx` — Full landing page redesign

Replace the entire component structure:

**Remove:** Fixed background gradient div, gradient text on "0", `bg-zinc-950` container, `rounded-full` pill inputs.

**New structure:**
```
Nav (sticky, 56px, backdrop-blur, border-b)
  ├── Logo: "karaoke" + "0" in text-primary (serif)
  └── ThemeToggle
Hero (white/background, centered, max-w-[1040px])
  ├── H1: Serif, ~65px, weight 400, tight tracking
  ├── Subtitle: Sans, text-muted-foreground
  ├── URL input: rounded-lg, border-border, shadow-sm, focus ring
  └── Submit button: bg-secondary inside input
Featured Section (bg-muted = cream, full-width)
  ├── H2: Serif, ~32px
  ├── Subtitle
  └── 3-col grid of FeaturedSongCards
Footer (bg-primary = blue, white text)
  ├── Logo
  └── Attribution
```

**FeaturedSongCard:** `rounded-lg border border-border bg-card hover:bg-accent` (not `rounded-xl bg-zinc-900/50`). Image with `rounded-md`. Title in `font-sans font-semibold`, artist in `text-muted-foreground`.

**Animations:** Keep Framer Motion entrance but reduce: `y: 20` → `y: 12`, `duration: 0.6` → `0.5`, reduce footer delay from `0.7` → `0.4`.

### Step 11: `src/routes/song/$songId.tsx` — Player page restyling

**Main container:** `bg-zinc-950 text-white` → `bg-background text-foreground`

**Header bar:**
- `bg-gradient-to-b from-zinc-950 via-zinc-950/80` → `bg-background/60 backdrop-blur-xl border-b border-border/30`
- Home button: `bg-white/10 rounded-full` → `text-muted-foreground hover:text-foreground` simple text/icon link
- Song title: Add `font-serif` for editorial feel
- Remove "Now Playing" label
- Suno link: `bg-white/10 rounded-full` → `rounded-md border border-border/50` outlined button style

**Bottom controls gradient:**
- `from-zinc-950 via-zinc-950/80` → `from-background via-background/80`

**ProcessingPage:**
- Remove purple/blue background gradient
- `bg-zinc-950 text-white` → `bg-background text-foreground`
- Spinner: `border-white` → `border-primary` (blue spinner)
- Text: `text-zinc-300/500` → `text-foreground/muted-foreground`

**ErrorPage:**
- Same token swaps as ProcessingPage
- Error title: `font-bold` → `font-serif font-normal text-3xl`
- Go back button: `bg-white text-black rounded-full` → `bg-secondary text-secondary-foreground rounded-md`

### Step 12: Delete `src/components/TextShimmer.tsx`

Empty file (1 line). Remove dead code.

### Step 13: Verify & Test

- Run `bun dev` and visually verify both pages in light and dark mode
- Test: Landing page loads → input form works → navigate to player → lyrics animate correctly → toggle theme → everything adapts
- Run `bun check` (biome lint + format)
- Run `bun build` to verify no build errors

---

## Files Changed Summary

| File | Action | Key Change |
|------|--------|------------|
| `src/styles.css` | **Rewrite** | New color tokens, font families, radius |
| `src/hooks/useTheme.ts` | **Create** | Shared theme hook |
| `src/routes/__root.tsx` | **Edit** | Google Fonts, theme init script, remove hardcoded dark |
| `src/components/ThemeToggle.tsx` | **Create** | Light/dark toggle button |
| `src/lib/colors.ts` | **Edit** | isDark param for opacity scaling |
| `src/components/AnimatedBackground.tsx` | **Edit** | Pass isDark to gradient helpers |
| `src/components/LyricsDisplay.tsx` | **Edit** | Theme-aware highlight colors (CORE LOGIC UNTOUCHED) |
| `src/components/ui/button.tsx` | **Edit** | Variant tokens → brand blue default |
| `src/components/AudioControls.tsx` | **Edit** | Token-based styling, blue progress bar |
| `src/routes/index.tsx` | **Rewrite** | Full Exa-style landing page |
| `src/routes/song/$songId.tsx` | **Edit** | Token-based styling, translucent header |
| `src/components/TextShimmer.tsx` | **Delete** | Dead code removal |

**New dependencies:** None (Google Fonts via `<link>`, lucide icons already installed)
