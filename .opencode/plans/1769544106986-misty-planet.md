# Plan: Fix Animated Background - Initial Colors & More Noticeable Animation

## Current Problems
1. **Blue color on start**: `DEFAULT_COLORS` shows purple/blue before image colors load. Should start with background color (transparent/zinc-950) and fade in extracted colors.
2. **Animation not noticeable**: Current pixel-based movements (30-60px) are tiny on 70vmax blobs. Scale changes (0.9-1.1) too subtle. Durations too long.

## Solution

### Issue 1: Start with Background Color
- Change `DEFAULT_COLORS` to transparent (opacity 0)
- Blobs start invisible and animate to visible when colors are extracted
- Use Framer Motion's `animate` prop with color values that transition from transparent

### Issue 2: More Noticeable Animation
- Use **percentage-based movement** instead of pixels: `-20%` to `+20%` creates significant drift
- Increase **scale range**: `0.8` to `1.2` (40% size change)
- Reduce **duration**: 12-18 seconds for more noticeable movement
- Increase **opacity**: 0.5, 0.4, 0.3 for more visible blobs

## Files to Modify

### 1. `src/lib/colors.ts`
Change `DEFAULT_COLORS` to use transparent (black with 0 alpha):
```typescript
export const DEFAULT_COLORS: ExtractedColors = {
  primary: [0, 0, 0],   // Start invisible
  secondary: [0, 0, 0], // Start invisible
};
```

### 2. `src/components/AnimatedBackground.tsx`
Major changes:
- Animate blob **opacity** from 0 to target when colors change
- Use **percentage-based positions** for x/y movement
- Increase **scale range** to 0.8-1.2
- Reduce **durations** to 12-18 seconds
- Increase base **opacity** values to 0.5/0.4/0.3

```tsx
<motion.div
  style={{
    background: `radial-gradient(circle, ${gradients.primary} 0%, transparent 70%)`,
  }}
  animate={{
    x: ["0%", "15%", "-10%", "5%", "0%"],    // Percentage movement
    y: ["0%", "-12%", "8%", "-5%", "0%"],
    scale: [1, 1.15, 0.85, 1.1, 1],          // Larger scale range
  }}
  transition={{
    duration: 15,                             // Faster
    repeat: Infinity,
    ease: "easeInOut",
  }}
/>
```

### 3. `src/hooks/useImageColors.ts`
Consider adding `isLoading` state to help AnimatedBackground know when to fade in colors.

## Updated Animation Values

| Blob | Size | Opacity | Duration | X Movement | Y Movement | Scale |
|------|------|---------|----------|------------|------------|-------|
| Primary | 80vmax | 0.5 | 15s | -15% to +20% | -12% to +15% | 0.85-1.15 |
| Secondary | 70vmax | 0.4 | 18s | -20% to +15% | -15% to +18% | 0.8-1.2 |
| Tertiary | 60vmax | 0.3 | 12s | -10% to +25% | -18% to +10% | 0.9-1.1 |

## Implementation Steps

1. Update `src/lib/colors.ts`:
   - Change `DEFAULT_COLORS` to `[0, 0, 0]` (transparent black)
   - Increase opacity in `getGradientColors()` to 0.5/0.4/0.3

2. Update `src/components/AnimatedBackground.tsx`:
   - Use percentage-based x/y animations
   - Increase scale range to 0.8-1.2
   - Reduce durations to 12-18 seconds
   - Increase blob sizes slightly
   - Add fade-in animation for the background gradient when colors change

## Verification

1. Run `bun dev` and navigate to `/song/{songId}`
2. **Check initial state**: No visible gradient on page load (background color only)
3. **Check color transition**: Colors fade in smoothly when extracted
4. **Check animation**: Blobs should visibly move and scale
5. Run `bun build` to verify no build errors
